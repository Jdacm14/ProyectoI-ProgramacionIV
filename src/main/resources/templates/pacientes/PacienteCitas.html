<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Histórico de Citas</title>
    <link rel="stylesheet" th:href="@{/css/historicoCitasStyle.css}">
</head>
<body>
<div th:replace="~{layouts/header}"></div>

<main class="contenedorCitas">
        <h1 class="titulo">Histórico de Citas</h1>
        <section class="filtros">
            <label for="filtroEstado" class="etiquetaFormulario">Filtrar por estado:</label>
            <select class="entradaFormulario" id="filtroEstado">
                <option value="todas">Todas</option>
                <option value="pendiente">Pendiente</option>
                <option value="completada">Completada</option>
                <option value="cancelada">Cancelada</option>
            </select>
            
            <label for="filtroMedico" class="etiquetaFormulario">Filtrar por médico:</label>
            <input type="text" id="filtroMedico" class="entradaFormulario" placeholder="Ingrese nombre del médico">
        </section>
        
        <!-- Tabla de Citas -->
        <section class="tablaCitas">
            <table>
                <thead>
                    <tr>
                        <th>Médico</th>
                        <th>Especialidad</th>
                        <th>Fecha</th>
                        <th>Hora</th>
                        <th>Estado</th>
                    </tr>
                </thead>
                <tbody>
                <tr th:each="horario : ${horarios}">
                    <!-- Buscar el médico correspondiente -->
                    <td th:with="medico=${medicos.?[id == horario.medicoID][0]}">
                        <span th:text="${medico != null ? medico.nombre : 'Desconocido'}"></span>
                    </td>
                    <td th:with="medico=${medicos.?[id == horario.medicoID][0]}">
                        <span th:text="${medico != null ? medico.ubicacion : 'N/A'}"></span>
                    </td>
                    <td th:text="${horario.fecha}"></td>
                    <td th:text="${horario.horaInicio}"></td>
                    <td>
                        <span th:text="${horario.estado}" th:classappend="${horario.estado}"></span>
                    </td>
                </tr>
                </tbody>
            </table>
        </section>
    </main>

<div th:replace="~{layouts/footer}"></div>

</body>
</html>
